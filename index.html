<!DOCTYPE html>
<html>
<head>
    <title>Electrician Pro Portal</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
        section { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
        input, textarea { width: 100%; margin: 10px 0; padding: 8px; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Electrician Business Portal</h2>

    <section id="admin-panel">
        <h3>Admin: Upload New Work</h3>
        <form id="adminForm">
            <input type="hidden" name="type" value="admin">
            <input type="text" name="jobTitle" placeholder="Job Title (e.g. Panel Upgrade)" required>
            <textarea name="description" placeholder="Describe the work done"></textarea>
            <input type="text" name="imageUrl" placeholder="Image Link (Host on Imgur or similar)">
            <button type="submit">Post to Website</button>
        </form>
    </section>

    <hr>

    <section id="customer-panel">
        <h3>Customer: Request Service</h3>
        <form id="customerForm">
            <input type="hidden" name="type" value="customer">
            <input type="text" name="name" placeholder="Your Name" required>
            <input type="email" name="email" placeholder="Your Email" required>
            <textarea name="message" placeholder="How can I help you?"></textarea>
            <button type="submit">Send Request</button>
        </form>
    </section>

    <script>
      function attachForm(id) {
    document.getElementById(id).onsubmit = async (e) => {
        e.preventDefault();
        const btn = e.target.querySelector('button');
        btn.innerText = "Sending...";

        // Convert form data to a URL-encoded string
        const formData = new FormData(e.target);
        const params = new URLSearchParams(formData);

        try {
            await fetch(SCRIPT_URL, { 
                method: 'POST', 
                mode: 'no-cors', // This bypasses strict CORS errors
                body: params
            });
            alert("Success! Data sent to Sheet.");
            e.target.reset();
        } catch (err) {
            console.error(err);
            alert("Error connecting to Google Sheets.");
        } finally {
            btn.innerText = "Submit";
        }
    };
}
    </script>
</body>

</html>
